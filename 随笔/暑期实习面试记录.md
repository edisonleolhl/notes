# 暑期实习面试记录

## CVTE

通过1.5笔试，挂在1.13现场一面

自我介绍一下吧

挑个印象最深刻的项目讲讲，比赛一个人吗？你负责什么？openflow协议是什么？

c++多态怎么实现（编译时多态用重载，运行时多态用虚函数），虚函数怎么实现，答到虚函数指针位于类实例的头部时，面试官打断问如果有继承的话虚函数指针放哪？我吞吞吐吐说可能忘记了，但我知道内存对象模型，然后扯了堆、栈、只读数据区、代码段等等

堆栈的区别，栈保存局部变量、函数返回地址与参数，系统自动释放，堆保存new出来的，如果不delete会内存泄露，然后扯了一下自己看过一篇文章说c++的自由存储区实际上是用堆实现的，只是语言背景不同而已。再问增长方向，回答栈向下，堆向上，在纸上画了个图。忘记答堆栈的在系统资源层面上的区别了。

有用过智能指针吗？autoptr与weakptr讲讲，我说weakptr主要是为了解决sharedptr的循环引用使引用计数失效，追问手写代码举例autoptr循环引用（没写出来）

uniqueptr是什么，回答独占对象，举个例子独占对象（没写出来）

匿名函数有哪些捕获，我说值捕获引用捕获指针捕获，面试官问有指针捕获？我赶紧改口外部捕获，面试官说没有外部捕获，那我说我的答案就是值捕获与引用捕获，没深问了

TCP udp区别，面向连接有区别，可靠性有区别，拥塞控制有区别，连接对象有区别，说到udp可以一对多，面试官有疑问，我说组播，随手画了个图，可能比较自信就没深问了，首部固定字节有区别，说到udp首部固定8字节时，面试官打断问有哪几个字段，我说源和目的端口还有检验和还有最后一个是协议号还是什么的，面试官说只有三个，答的中规中矩（其实应该是4个，源和目的端口、校验和、数据长度）

tcp拥塞控制，回答reno vegas两个版本，前期只有慢启动，拥塞避免，后来加入快恢复与快重传，每个阶段用画图表示，问我坐标轴是什么，我说横坐标传输轮次，纵坐标拥塞窗口，这题答的不错

为什么有time wait阶段，答了计网书上两个原因，应该答的还可以

有动手写过网络编程吗，回答没有自己亲自实现过就没问了（减分项）

有听过粘包吗，我说没有，他说在网络编程中经常有的现象（减分项）

手写算法，判断字符串是否对称，我说从中间分开，双指针比较往两边移动一一比较，写到一半时说要注意边界情况，给他说了一下需要考虑奇偶情况

进程与线程的区别，答了资源分配的最小单位与cpu调度的最小单位，进城的定义， 进程间通信更复杂，地址空间独立与不独立，一个线程挂掉会影响其他线程 ，线程系统开销小，感觉没答完，想了一会说暂时只记得这几个

总结：面试官挺帅的，很温柔，面试官前面摆着台电脑，用来看题库和写面试者的表现，面试者是看不到的，桌上有白纸和笔，随时准备手写代码，回头来看，当时准备的真的很差劲。。。

## 淘宝商家技术部一面

2.24一面，因为收我简历的面试官是搞Java的，对我又很感兴趣，就让我面Java的岗位了

简历、项目

引用和指针，追问了哪个是对象

面向对象怎么理解（继承、封装、多态）

多态与虚函数

动态内存分配（new delete）

笔试：实现一个函数，传入两个字符串数组，返回共同字符串，要求用C++、Java、Python三种语言都实现一遍，最后跟面试官确定了是去重的（用set很快就实现了，难点在于三个语言实现，所以我为啥要说我学过三门语言呢？）

## 钉钉一面

自我介绍、简历、项目

介绍一下智能指针（auto_ptr已废弃，unique_ptr独占式/禁止拷贝，shared_ptr引用计数/自动析构/死循环，weak_ptr弱引用解决shared_ptr死循环的问题）

介绍一下STL，基本上按照STL源码剖析来的，空间配置器两级、空闲链表、内存碎片，迭代器粘合剂、隐藏内部实现、萃取，容器vector、list、heap、set、map，仿函数、适配器inserter与基于deque的stack和queue

介绍一下操作系统，我主要说了一下内存管理（交换技术、虚拟内存：页表页面页框，页面置换算法LRU）与死锁（提到了华为比赛，四个产生原因）的理解

CPU调度方式有了解过吗（Round Robin，优先级调度，优先级调度可能会产生饥饿的问题，解决方法是偶尔提升一下优先级，还有一些基于优先级的变种调度方法）

进程间通信（管道、信号、信号量、共享内存、消息队列、套接字，还多说了一下最好的是套接字，因为可以跨主机，在管道那里还提到pipe函数中，fork后父子进程一个关fd[0]一个关fd[1]，以及单工的问题）

网络编程，介绍一下epoll（先说了I/O复用的好处，内核注册事件表、LT与ET）

为什么要有time wait（两个原因），time wait过多怎么办（重用与快速回收）

数据库MySQL的索引是什么，简单介绍一下（B+树，减少磁盘IO，数据存在叶子节点，叶子节点有顺序的指针，可供范围循环）

MySQL的主键索引和副键索引（我回答只知道主键是唯一的，没具体了解过）

你了解哪些开源产品（我说了阿里的Dubbo，分布式的RPC框架，说了一下RPC的概念）

服务器怎么负载均衡（我说服务器集群，类似线程池那样，一个负责接收连接，具体业务交给其他服务器）

HTTP1和2的区别（没怎么答上来，但我还是说了一下我的推测，更安全的SSL、缓存更好、状态码更多、交互更加丰富）

网页编辑器白板手撕代码：合并k个有序链表

拿到题后我说了我的想法，可以转化为两个有序链表的合并，这样合并k-1次两个链表即可，但面试官表示效率不理想

然后我就想到了刚才的做法会重复比较，于是说了个更快的想法：依次比较k个链表头部，把其中的最小值加到输出链表后面，这个得到最小值的链表的cur指针后移一位

写完后在面试官提示下想起了用最小堆改善最小值的操作

总结：总体而言很轻松，很多题目都是开放的，我可以尽情吹我知道的所有知识：）

## 淘宝商家技术部二面

2.26 10:00~12:40，全程瑟瑟发抖

项目30分钟，问的很细，调度器和计算结果那里没搞懂，一直在问

类和对象（封装、继承、多态）

为什么有类型（扯汇编，扯安全），C++和Java是强类型语言（不知道。。。）

三种语言关于继承的知识，C++因为虚函数有菱形继承的问题所以引入虚基础，Java不支持多重继承，但有implement多个接口可以间接实现，Python最基本的单继承、多继承、多级继承、混合继承都支持，没有特别

友元举个例子，我举的例子是钱的账户account与存取的交易transaction，account内部不应该定义add和sub方法，而应该交给transaction去操作，更加安全，而且也符合类的松耦合，类的规模尽可能小

手撕代码（可以在本地IDE写，共享屏幕）

设计一个访问控制IP的类，一分钟内超过30次访问，该IP在接下来的3分钟每分钟只能访问三次（限时一个小时，可以上网查一些接口用法，基本功能都没写出来，我太渣了-_-）

实现LRUCache（限时半个小时，写完后设计一下测试用例，有点小bug，最早的项目没有移除）

总结：大佬不愧是大佬，瑟瑟发抖，在项目那里刨根问底，类与对象那里讨论了很久，第一个算法题有点难

## 腾讯TEG一面（直系师姐内推）

3.2 11：20-12：20，电话面试

自我介绍

华为比赛，死锁，优化手段

科研，背景，怎么实现的，定价策略，控制器集群（对方是做分布式存储的），

深拷贝与浅拷贝

析构函数为什么是虚的

三次握手交换了什么，seq/ack+发送窗口，发送窗口是干什么的，解释滑动窗口协议

信号和信号量的区别

IO协议栈，没听懂，面试官举例说打开一个文件，从键盘输入再保存，这段时间发生了什么。我回答说键盘是外设，产生IO中断，CPU读取放入内存，再从内存放入磁盘。追问读取数据怎么从内存写入磁盘（我扯了一些页面置换什么的，没答好）。中间我还扯到了L1L2L3缓存，对方打断问我里面有什么东西，我真是不作死就不会死。。扯了一些寄存器什么的。。

32位系统，地址空间是多大（2^32=4GB）

物理地址空间和虚拟地址空间怎么转换（扯了一些基本定义，最后坦言具体怎么转换的不知道

内存有哪些技术（开放回答，交换技术与虚拟内存，重点讲虚拟内存、页面页框页表、缓存淘汰的策略一般是LRU）

算法题：以单词为最小单位翻转字符串，先整体翻转，然后遍历，碰到空格时把前面一小段翻转（单词翻转）

算法题：10万个数字找重复数据，我回答了哈希表、位图、布隆过滤器、排序，对面说够了

还有什么想问，为了表现一下自己，问了一下对方产品怎么做的一致性，还问了有没有借鉴PAXOS与RAFT算法，对方给我讲了挺多关于存储的只是

总结：没问网络并发与数据库，除了操作系统的几个问题，其他都答的挺好的，看来要多看看操作系统的细节了，最后的提问交流还挺愉快的

## 阿里零售通一面

3.5电话一面，54min，投的后台，因为没有后台没有C++，所以推给了做搜索引擎的算法组，所以对算法扣的很细

抓项目，介绍SDN，问SDN大赛，问流量调度算法，这几年做了什么成果

再抓项目，dijkstra怎么改良，为什么要用dijkstra，floyd为什么不好，时间复杂度怎么计算，松弛操作是啥

再再抓项目，LDA算法是啥（稍微介绍了下，具体原理没了解），狄利克雷分布是啥（不知）

指针和数组的区别（谈到了浅拷贝）

浅拷贝和深拷贝的区别

介绍一下排序算法（冒泡、插入、快排，扯了下STL的内省排序、堆排序、归并，还说了下三种O(n)时间复杂度的计数排序、桶排序、基数排序）

有什么想问的，我问了他们搜索具体是做什么，团队规模多大（说只有两位同学。。。这有HC吗？

## 阿里国际化一面

3.6 1h

自我介绍

内存泄漏，new,delete,malloc,free,构造函数,析构函数，智能指针，循环引用，深拷贝浅拷贝

Linux开机的过程（bios，硬件自检，启动MBR，init，在inittab配置文件中确定运行权限，开启用户进程

Linux装载的概念（我说一切皆文件，为了让操作系统知道如何操作文件，就需要装载，但查了下，面试官应该问的是挂载（mount）的概念吧

软连接和硬链接（我说这好像是文件系统里的概念，我不太了解）

Linux命令cat，如何实现tac，反过来输出文件，我说fseek从后往前扫描文件里的每一行，用一个while循环，到头就结束

如果文件很大，无法一次性装入内存，怎么办，我说会产生缺页中断，说了下虚拟内存的机制

synflood是啥，怎么产生危害的，如何避免，我说服务器不重传那么多次第二次握手，早点结束，后来又扯到了SDN大赛做的源地址验证

引入SDN大赛，介绍SDN概念，起源，优势

说说hashmap，STL，哈希冲突，开链法和开放地址寻址法，开链法怎么优化时间复杂度（我首先说vector，插入时排序，然后二分查找，后来面试官说vector的插入不太好，我想到了红黑树，但还是在面试官提示下才想到要把哈希表和红黑树结合，我当时想的是何必在unordered_map里面再用map，直接用map就好了，但是面试官的要求是想在哈希表最差情况下是O(logn)的查找时间，所以要两者结合）

红黑树的性质，为什么比树要好，在哪里有应用（我回答了epoll里面）

15min反转单链表，一次性AC了，还不错

## 腾讯TEG二面

3.6 1h

SDN项目，讲到令牌桶，问我怎么实现，我说队列，差点讲生产者消费者模型（我怕我讲了之后要我现场实现一个）

华为比赛，碰到什么技术难点，怎么实现的

epoll的工作模式，优缺点

select怎么做的，缺点，内存开销

重载怎么实现的，名字翻译

虚函数

管道分为哪几种，匿名管道怎么实现的（fork，拷贝父进程地址空间，共享同一个管道socket，所以可以匿名通信

手撕代码：二叉树的（最大）宽度。牛客网面试房间，写完之后要调用main函数输出的。

## 阿里国际化二面

3.7 50min，两道代码题：输出链表倒数第k个节点+青蛙跳房子

面试官面的是Java岗，我坦白投的是C++，所以运气很好地给我换成了两个算法题，而且都不难，做的不错

## 阿里TEG三面

3.10 1h

怼项目，那些优化手段都没问、调度器也没问，就问为什么会有死锁，我回答说调度规则决定的，能否试探加锁去解决死锁（不行，因为车辆不准只走一部分，如果它没法走满速度，那它会等待，这样有可能会循环等待，举了个四方形环路的例子）

问SDN项目遇到的困难，我说用户与控制器通信的方式弄了很久才知道，面试官认为这是一个很基础的功能，任何SDN控制器都要提供，说我技术选型有问题，我回答最开始没想到需要这个功能，这个框架已经搭建好了，所以就没想其他SDN控制器，这需要自己手动实现，最后是通过NAT技术转换实现的用户与控制器通信的（有点减分，说我技术选型有问题）

时延检测模块，为何精度要好（SDN环境下，交换机没有能力处理包头，所以要上交给控制器，所以得自己实现检测方法），时间是怎么得到的，Python的time库函数的返回值最小粒度是多少（我被怼的有点慌了，这里答得太烂了）

Linux的定时精度，怎么往前走的（晶振，产生一个滴答，定时器，如时间轮，这里回答上来了）

进程间通信，要发送10GB数据，要怎么做，首先说了管道，再socket，然后用socket距离说了流程：因为socket有缓冲区，所以可以先分段，然后再一边写，一边读。然后后问我IPC哪个方式最快，回答共享内存，话题转移到共享内存的实现了，我说mmap，问我有没有实际写过，我说没有，但我知道一些应用场景

问mmap有哪些应用（malloc分配内存，以及epoll往内核注册事件，这里回答上来了）

集合，里面每个数字都有两个，只有一个数字只有一个（我回答异或，问我有没有其他的，我说哈希表，然后详细说了两种方法的具体实现以及时空复杂度）

智力题，药丸（回答出来了）

## 钉钉二面

3.11 1h

介绍项目的时候没怎么提我的SDN比赛与科研项目，重点说了华为软件精英挑战赛

死锁怎么解决的，为什么产生死锁就得回溯or重来（因为调度规则的原因，车速必须打满，否则得等待）

看我比赛用Python写的，问我为什么Python比C++慢，我回答说一个是静态编译语言，一个是解释型脚本语言，C++对内存控制更加贴近底层blabla，Python和C++各有什么优势（Python脚本，快速搭建原型，追求性能再用C++重写）

const常量与宏定义常量的区别

C++多线程了解吗，要注意什么，有什么锁，问到读写锁，我说C++里面好像没有读写锁，他说是操作系统里的读写锁

内存泄漏怎么办

shared_ptr重载了=运算符，里面有什么，要注意什么，返回值是什么

服务器端有100万个TCP长连接，可能会出现的问题，首先回答说一个连接占用一个socket，socket有最大数量限制，没法支持100万个，然后说一个TCP连接还有发送缓冲区和接收缓冲区，追问大小是多少，我说记不太清了，4196kb，通过套接字选项或内核文件可修改，然后继续回答100万个TCP连接可能会把内存占满。后面还答了CPU不够，可能计算不过来，导致客户端发送请求后久久得不到响应

DDoS是什么

SYN FLOOD怎么处理，我说清洗非法源地址加上服务器端减少重传第二次握手包的次数or快速放弃连接，再问有什么方法可以减少SYN包带来的资源消耗，我说TCP fast open，然后解释了一通，但好像不是他想要的，他愣了一下就跳过了这里

TCP半连接是什么意思（发生在四次挥手的时候，客户端关闭说明没有东西要发送了，服务器端仍然可以发送），三次握手的时候有半连接吗（没有，因为只有双方established才能通信）

slow start是什么，为啥要slow start（不知道网络是怎么样的，所以要用小包探测，如果直接发大包，那会给加剧拥塞）

看过什么书

有看过什么开源产品/项目的代码吗，如redis、memcached、libevent、levelDB，我说大公司开源产品的源码没深究过，最熟悉的源码可能是STL吧，按照书本内容按图索骥

设计模式知道什么，单例模式怎么实现（双检锁版本or局部静态对象版本），双检锁为何会失效有深究吗（我说在stackoverflow上看到的，但原因是由于操作系统平台引起的，没深究）

现在其他公司or部门面试情况怎么样了

你觉得你自己最大的缺点是什么（有点小固执）

遇到最难的技术问题是什么，怎么解决的

如果重来华为比赛，你觉得有什么可以改进的（用C++重写，用冠军队伍的二分发车法）

问我有什么问题，我问了下IM的写扩散在大群的里的问题，这是个我提前准备好的针对问题，C++在钉钉中主要做IM，所以提前了解了IM的一些知识

## 阿里支付宝网络技术部

3.11 50min

不愧是搞网络的，对于我的SDN项目很感兴趣，先问我当时SDN比赛的题目，我先给自己了一个台阶，“现在来看，当时的想法不是特别的完善，但是也很幸运的获得了全国一等奖”，然后说明了流量调度算法的场景，部署在域内的接入交换机上，然后说到当时我在武汉华科的决赛现场做方案展示，事先排练过很多遍，展示的时候很不错，评委给了高分，所以获得了全国一等奖

华为的软件精英挑战赛也几乎是我全程在介绍，优化手段，死锁产生原因和死锁，复现调度器，有问到赛制流程、参赛人数这方面的问题

两个项目都问了我在团队里面的定位，负责的内容，收获是什么，技术难点是什么

TCP拥塞控制算法了解多少，非常开放的题目，我从拥塞控制的老版本Vegas、Reno、Tahoe，一直到cubic，再到最近几年谷歌开源的bbr

quic了解多少，非常开放，我说了减少握手时间、避免队头阻塞、在应用层实现这些方面，面试官觉得我说的挺好的

问了我一个模糊不清的场景题：quic和TCP怎么保证传输，用哪个，我说先用ping命令之类的手段去探测网络情况，再根据quic和TCP的特点去选择，TCP是面向连接的，更加可靠，而quic更快

我有什么想问的，quic、bbr在业界使用情况怎么样，5G会不会带来新的发展，面试官从他的角度上给出了自己见解

问我还有其他面试没有，我如实说了

还问我籍贯，正好是湖南老乡，最后说有机会一起共事

## 美团到店事业群一面

3.16 15:00-15:40，后端开发，主要写Java，还有一些RPC、中间件、MQ什么的

项目，对惩罚项和死锁比较感兴趣，没有刨根问底，应该是觉得项目做得还可以

CPU调度方法，讨论了一下饥饿现象的产生和如何解决

哲学家就餐问题，怎么解决死锁

对数据库有多少了解，索引的注意事项，b+树和b树的区别

看我比较熟悉计算机网络，从网址输入url到看到页面的过程

## 微软一面

3.18苏州软件开发，11:00-12:00

自我介绍顺带介绍了项目

讲讲ARMA

看我网络还行，问TCP三次握手的过程，为啥两次不行

ARP是啥

手撕代码：输入二维数组vec，行数是交通灯的位数，列数是表示一个数字的晶体管个数（固定为7），vec[i][j]为1表示第i位的第j个晶体管亮了，为0则不亮，但是现在有可能有些晶体管坏了，导致数字残缺，现在给定这样的一个二维数组，求出所有数字的可能（保证输入肯定有解，每个数字至少有一个晶体管是亮的）

首先跟他说了我的想法，先拆分成每一位数字可以转化成的合法数字，然后n位，前后组合即可，每一位数字可以转化成的合法数字可以用回溯算法来做，因为晶体管只有7个，只需要对没点亮的晶体管增加一个分支进行探索即可，最多2^6

最后时间到了，还有格式化输出函数没写，面试官问我回溯算法时间复杂度是多少，因为至少有一个晶体管是亮的，只需要对其他6位进行回溯，所以是2^6，总共n位，所以是O(n*2^6)=O(64n)，当n很大时，可以认为是O(n)

面试完后来想到一个优化手段，把数字与它点亮的晶体管序号做映射，比如1：{5,6}，即数字1只需要点亮第5根与第6根（从0编号），然后读取残缺的数字，假设读到{0,0,0,0,0,0,1}，即只有第6根点亮{6}，可以发现{5,6}包含{6}，所以残缺的数字肯定可以转化为1，再试探能否转化2、3...，10个数字遍历完后，当前残缺的数字能转化成的合法数字就全部找到了，存起来，最后格式化输出

## 美团到店事业群二面

3.21 16:20-18:20，本来约定是16:15-17:15的，但是面试官上个面试还没结束，所以先扔给我一道题

牛客网手撕代码：大数相加，造了几个测试用例，都通过了，解释了一下代码思路

如何优化你的代码（去掉补零操作），如何改造成浮点数相加（让小数点对齐，整数部分位数少的前面补零，小数部分位数少的后面补零）

17:00 面试官开视频了，进入面试环节

自我介绍

介绍华为比赛的时候扯了围棋的蒙特卡洛搜索以及启发式最短路径算法A*

四个项目都简单问了问，坦白电商网站项目是个人学习用的，公众号文本分析项目的来龙去脉

问我三大语言的了解程度，还打了我的简书

数据库怎么优化

场景设计题：需要存储几个文件，如何用代码实现事务，提交时要注意什么，需要满足事物的四大特性，考虑隔离的级别，考虑锁与并发，问得特别细，而且非常开动脑筋，感觉是没有完美答案的，只是用来考察候选人对知识深度的理解

NoSQL了解多少，我回答知道一些redis和memcached，然后说最近看了篇文章redis的有序集合是用跳表实现

看过什么源码，muduo和c++的STL

你喜欢与他人一起工作，还是独自工作

你如何承受压力，如果工作很忙，你会学习吗

和他人意见不合怎么办

你的优点缺点

喜欢北京吗？上海呢？毕业想去哪个城市？

最后问面试官，美团事业群是按业务分部门的，比如到店事业群中分为酒店业务线、旅游业务线、餐饮业务线，都是解决实际业务问题
